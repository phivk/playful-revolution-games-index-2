---
phase: 03-design-cms
plan: "02"
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: true
requirements:
  - CMS-01
  - CMS-02
  - CMS-03
must_haves:
  truths:
    - "Admin can add new games via Decap CMS"
    - "Admin can edit existing games via Decap CMS"
    - "Admin can delete games via Decap CMS"
  artifacts:
    - path: "public/admin/index.html"
      provides: "Decap CMS entry point"
    - path: "public/admin/config.yml"
      provides: "CMS configuration with games collection"
    - path: "src/app/admin/page.tsx"
      provides: "Admin route rendering CMS"
---

<objective>
Set up Decap CMS admin interface for managing games (add, edit, delete).
</objective>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/03-design-cms/03-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Create Decap CMS admin HTML entry point</name>
  <files>public/admin/index.html</files>
  <action>
    Create public/admin/index.html with Decap CMS script from CDN:
    - Include decap CMS script tag
    - Include CSS for admin interface
    - Body should have just the CMS script initialization

    Reference: decapcms.org/docs/add-to-your-site
  </action>
  <verify>ls -la public/admin/</verify>
  <done>Decap CMS admin entry point created at /admin</done>
</task>

<task type="auto">
  <name>Configure Decap CMS with game collection</name>
  <files>public/admin/config.yml</files>
  <action>
    Create public/admin/config.yml with:

    Backend: Use git-gateway or github backend (for Netlify/Vercel)

    Collections - Games:
    - name: "games"
    - label: "Games"
    - folder: "content/games"
    - create: true (for adding)
    - delete: true (for deleting)
    - slug: "{{slug}}" (for URL-friendly filenames)
    
    Fields for game content:
    - title (string)
    - slug (string, generated from title)
    - description (text)
    - tags (list of strings)
    - pillars (list: Intellectual, Social, Physical)
    - energy (select: Low, Medium, High)
    - materials (text)
    - setup (text)
    - howToPlay (text)
    
    Reference existing game markdown structure in content/games/
  </action>
  <verify>grep -E "(backend|collections|games)" public/admin/config.yml | head -10</verify>
  <done>Decap CMS configured with games collection</done>
</task>

<task type="auto">
  <name>Verify CMS integration and test workflow</name>
  <files>src/app/admin/page.tsx</files>
  <action>
    Create /admin route that renders the Decap CMS:
    - Use src/app/admin/page.tsx
    - Render the admin/index.html content via iframe or dynamic import
    - Ensure proper Next.js configuration for static export
    
    Test the workflow:
    1. Navigate to /admin
    2. Verify CMS login/auth appears
    3. Verify games collection is visible
    4. Verify add/edit/delete options are available
  </action>
  <verify>curl -s http://localhost:3000/admin | grep -i decap</verify>
  <done>CMS accessible at /admin with add/edit/delete capabilities</done>
</task>

</tasks>

<verification>
- [ ] /admin route renders Decap CMS
- [ ] Can authenticate (git-based auth via Netlify Identity or OAuth)
- [ ] Games collection visible in CMS
- [ ] Can add new game via CMS (creates markdown file)
- [ ] Can edit existing game via CMS
- [ ] Can delete game via CMS
</verification>

<success_criteria>
All 3 CMS requirements implemented:
- CMS-01: Decap CMS admin interface for adding games
- CMS-02: Decap CMS admin interface for editing games
- CMS-03: Decap CMS admin interface for deleting games
</success_criteria>

<output>
After completion, create `.planning/phases/03-design-cms/03-02-SUMMARY.md`
</output>
